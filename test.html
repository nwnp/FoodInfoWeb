<!DOCTYPE html>
<html>
  <head>
    <title>API</title>
  </head>
  <body>
    <h1>공공데이터</h1>
    <input
      class="btn btnData"
      style="width: 200px; color: #181818; margin-left: 35%"
      type="button"
      value="공공데이터 받기(클릭)1"
    /><br /><span></span>
    <p id="text"></p>
  </body>
  <script>
    let contents = document.querySelector("#contents");
    let thisUrl = `http://apis.data.go.kr/1471000/HtfsInfoService2/getHtfsItem?ServiceKey=iDkLT4eS%2FHMo6lNvhVqC0ls3w2lW41gVYeFPsE98tklSxWHVKd%2F5G%2F7Dbu7Xrxt4Bb%2BFsPXzcc7nNzYN16eyUA%3D%3D&numOfRows=12&pageNo=10&type=json`;
    let btnData = document.addEventListener("click", () => {
      fetchData(thisUrl, contents);
    });

    function fetchData(url, el) {
      fetch(`https://api.allorigins.win/raw?url=${encodeURIComponent(url)}`)
        .then((res) => {
          if (res.ok) return res.text();
          throw new Error("Network response was not ok");
        })
        .then((data) => {
          document.getElementById("text").innerHTML = data;
          const dataJson = JSON.parse(data);
          console.log(dataJson.body);
        });
    }
  </script>
</html>
